<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:components="clr-namespace:CSimple.Components"
             x:Class="CSimple.Pages.ObservePage"
             Title="Observe"
             Shell.NavBarIsVisible="True"
             BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundLight}, Dark={StaticResource BackgroundDark}}">
    <ContentPage.Resources>
        <!-- Import app styles -->
        <ResourceDictionary Source="../Resources/Styles/AppStyles.xaml" />
    </ContentPage.Resources>
    <Grid RowDefinitions="Auto,*,Auto"
          Padding="16">
        <!-- Header Section -->
        <Border Style="{StaticResource ModernCardStyle}"
                Grid.Row="0">
            <Grid ColumnDefinitions="*,Auto">
                <VerticalStackLayout Grid.Column="0"
                                     Spacing="8">
                    <Label Text="Action Recording Dashboard"
                           Style="{StaticResource HeaderStyle}" />
                    <Label Text="Capture and analyze user interactions in real-time"
                           Style="{StaticResource BodyTextStyle}" />
                </VerticalStackLayout>
                <HorizontalStackLayout Grid.Column="1"
                                       VerticalOptions="Center">
                    <Label Text="Record All"
                           VerticalOptions="Center"
                           Margin="0,0,8,0" />
                    <Switch IsToggled="{Binding IsReadAllToggled}"
                            Style="{StaticResource ModernSwitchStyle}"
                            VerticalOptions="Center" />
                </HorizontalStackLayout>
            </Grid>
        </Border>
        <!-- Main Content - Using Components -->
        <ScrollView Grid.Row="1"
                    Margin="0,16,0,0">
            <FlexLayout Direction="Row"
                        Wrap="Wrap"
                        JustifyContent="Start"
                        AlignItems="Start"
                        AlignContent="Start"
                        Padding="0,4">
                <!-- Action Information Card Component -->
                <components:ActionConfigurationCard x:Name="ActionConfigCard"
                                                    InputModifierClicked="OnInputModifierClicked"
                                                    BindingContext="{Binding}"
                                                    Margin="0,8,8,8" />
                <!-- Capture Controls Card Component -->
                <components:CaptureControlsCard x:Name="CaptureControlsCard"
                                                BindingContext="{Binding}"
                                                Margin="8,8,0,8" />
                <!-- Preview Card Component -->
                <components:CapturePreviewCard x:Name="CapturePreviewCard"
                                               BindingContext="{Binding}"
                                               Margin="0,8,8,8" />
                <!-- Actions Card Component -->
                <components:RecordedActionsCard x:Name="RecordedActionsCard"
                                                BindingContext="{Binding}"
                                                Margin="8,8,0,8" />
            </FlexLayout>
        </ScrollView>
        <!-- Input Modifier Popup Component -->
        <components:InputModifierPopup x:Name="InputModifierPopupControl"
                                       Grid.Row="0"
                                       Grid.RowSpan="3"
                                       OkayClicked="OnOkayClicked" />
    </Grid>
</ContentPage>